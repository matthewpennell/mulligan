{"version":3,"sources":["mulligan.js"],"names":["document","addEventListener","first_paragraph","first_letter","remainder","querySelector","innerHTML","substring","style","minHeight","offsetHeight","fetch","then","response","json","artist","track_info","recenttracks","track","track_name","name","img","createElement","byline","src","image","alt","em","span","fragment","appendChild","createDocumentFragment"],"mappings":"AACAA,SAAAC,iBAAA,mBAAA,KACA,IACAC,EACAC,EACAC,EAHAJ,SAAAK,cAAA,gBAAA,IAEAF,GADAD,EAAAF,SAAAK,cAAA,iBAAA,GACAC,UAAAC,UAAA,EAAA,CAAA,EACAH,EAAAF,EAAAI,UAAAC,UAAA,CAAA,EACAL,EAAAI,UAAA,yBAAAH,EAAA,UAAAC,EACAJ,SAAAK,cAAA,uBAAA,EAAAC,UAAAH,EAEA,CAAA,EAGAH,SAAAC,iBAAA,mBAAA,KACAD,SAAAK,cAAA,eAAA,IACAL,SAAAK,cAAA,eAAA,EAAAG,MAAAC,UAAAT,SAAAK,cAAA,WAAA,EAAAK,aAAA,KAEA,CAAA,EAGAV,SAAAC,iBAAA,mBAAA,KACAU,MAAA,6IAAA,EAAAC,KAAAC,GAAAA,EAAAC,KAAA,CAAA,EAAAF,KAAAE,IAEA,IAAAC,GADAC,WAAAF,EAAAG,aAAAC,MAAA,IACAH,OAAA,SACAI,EAAAH,WAAAI,KACAC,EAAArB,SAAAsB,cAAA,KAAA,EAGAC,GAFAF,EAAAG,IAAAR,WAAAS,MAAA,GAAA,SACAJ,EAAAK,IAAAP,EAAA,OAAAJ,EACAf,SAAAsB,cAAA,KAAA,GACAK,EAAA3B,SAAAsB,cAAA,IAAA,EAEAM,GADAD,EAAArB,UAAAa,EACAnB,SAAAsB,cAAA,MAAA,GAIAO,GAHAD,EAAAtB,UAAAS,EACAQ,EAAAO,YAAAH,CAAA,EACAJ,EAAAO,YAAAF,CAAA,EACA5B,SAAA+B,uBAAA,GACAF,EAAAC,YAAAT,CAAA,EACAQ,EAAAC,YAAAP,CAAA,EACAvB,SAAAK,cAAA,mBAAA,EAAAyB,YAAAD,CAAA,CACA,CAAA,CACA,CAAA","file":"scripts.js","sourcesContent":["// Slice the first character of article content to make the dropcap.\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (document.querySelector('.post-template')) {\n        const first_paragraph = document.querySelector('#post-content p');\n        const first_letter = first_paragraph.innerHTML.substring(0, 1);\n        const remainder = first_paragraph.innerHTML.substring(1);\n        first_paragraph.innerHTML = '<span class=\"sr-only\">' + first_letter + '</span>' + remainder;\n        document.querySelector('#post-content-dropcap').innerHTML = first_letter;\n    }\n});\n\n// Fix the height of the page on shorter posts and wider screens if the image is too tall.\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (document.querySelector('#post-content')) {\n        document.querySelector('#post-content').style.minHeight = document.querySelector('#metadata').offsetHeight + 'px';\n    }\n});\n\n// Poll the Last.fm feed and grab my latest listened track.\ndocument.addEventListener('DOMContentLoaded', () => {\n    fetch('https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=Watchmaker&api_key=eae3e31423356ac400ac5c429a5b855e&format=json&limit=1').then(response => response.json()).then(json => {\n        track_info = json.recenttracks.track[0];\n        const artist = track_info.artist['#text'];\n        const track_name = track_info.name;\n        const img = document.createElement('img');\n        img.src = track_info.image[3]['#text'];\n        img.alt = `${track_name} by ${artist}`;\n        const byline = document.createElement('div');\n        const em = document.createElement('em');\n        em.innerHTML = track_name;\n        const span = document.createElement('span');\n        span.innerHTML = artist;\n        byline.appendChild(em);\n        byline.appendChild(span);\n        const fragment = document.createDocumentFragment();\n        fragment.appendChild(img);\n        fragment.appendChild(byline);\n        document.querySelector('footer #listening').appendChild(fragment);\n    });\n});\n"]}